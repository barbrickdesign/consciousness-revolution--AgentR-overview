<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consciousness Revolution - THE MIRROR</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-dark: #0a0a0f;
            --bg-card: #12121a;
            --text-primary: #e0e0e0;
            --text-secondary: #888;
            --accent: #9333EA;
            --builder: #22C55E;
            --destroyer: #EF4444;
            --neutral: #6366F1;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            width: 100%;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.5em;
            background: linear-gradient(135deg, #9333EA, #6366F1, #0EA5E9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1em;
        }

        /* The Heptagram */
        .heptagram {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            gap: 8px;
            flex-wrap: wrap;
        }

        .domain-dot {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .domain-dot:hover {
            transform: scale(1.2);
            box-shadow: 0 0 20px currentColor;
        }

        .domain-dot.d1 { background: #9333EA; }
        .domain-dot.d2 { background: #6366F1; }
        .domain-dot.d3 { background: #0EA5E9; }
        .domain-dot.d4 { background: #22C55E; }
        .domain-dot.d5 { background: #EAB308; }
        .domain-dot.d6 { background: #F97316; }
        .domain-dot.d7 { background: #EF4444; }

        /* Input Area */
        .input-section {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .input-section h2 {
            font-size: 1.2em;
            margin-bottom: 16px;
            color: var(--accent);
        }

        textarea {
            width: 100%;
            min-height: 150px;
            background: var(--bg-dark);
            border: 1px solid #333;
            border-radius: 8px;
            padding: 16px;
            color: var(--text-primary);
            font-size: 16px;
            resize: vertical;
            margin-bottom: 16px;
        }

        textarea:focus {
            outline: none;
            border-color: var(--accent);
        }

        .analyze-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #9333EA, #6366F1);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(147, 51, 234, 0.4);
        }

        /* Results */
        .results {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            display: none;
        }

        .results.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .polarity {
            text-align: center;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 24px;
        }

        .polarity.builder {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(34, 197, 94, 0.1));
            border: 1px solid var(--builder);
        }

        .polarity.destroyer {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.1));
            border: 1px solid var(--destroyer);
        }

        .polarity.neutral {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(99, 102, 241, 0.1));
            border: 1px solid var(--neutral);
        }

        .polarity h3 {
            font-size: 1.5em;
            margin-bottom: 8px;
        }

        .polarity.builder h3 { color: var(--builder); }
        .polarity.destroyer h3 { color: var(--destroyer); }
        .polarity.neutral h3 { color: var(--neutral); }

        .domains-detected {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 24px;
        }

        .domain-tag {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .reflection {
            background: var(--bg-dark);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid var(--accent);
        }

        .reflection h4 {
            color: var(--accent);
            margin-bottom: 12px;
        }

        .reflection p {
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .patterns-found {
            margin-top: 20px;
        }

        .pattern-list {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 8px;
        }

        .pattern-tag {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 13px;
        }

        .pattern-tag.builder {
            background: rgba(34, 197, 94, 0.2);
            color: var(--builder);
        }

        .pattern-tag.destroyer {
            background: rgba(239, 68, 68, 0.2);
            color: var(--destroyer);
        }

        footer {
            margin-top: 40px;
            text-align: center;
            color: var(--text-secondary);
            font-size: 14px;
        }

        footer a {
            color: var(--accent);
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>THE MIRROR</h1>
            <p class="subtitle">See your pattern across 7 domains of consciousness</p>
        </header>

        <!-- The Heptagram -->
        <div class="heptagram">
            <div class="domain-dot d1" title="1. COMMAND - Crown" onclick="exploreDomains()">1</div>
            <div class="domain-dot d2" title="2. BUILD - Third Eye" onclick="exploreDomains()">2</div>
            <div class="domain-dot d3" title="3. CONNECT - Throat" onclick="window.location.href='/seven-domains/family/index.html'">3</div>
            <div class="domain-dot d4" title="4. PROTECT - Heart" onclick="window.location.href='/seven-domains/legal/index.html'">4</div>
            <div class="domain-dot d5" title="5. GROW - Solar Plexus" onclick="window.location.href='/seven-domains/business/index.html'">5</div>
            <div class="domain-dot d6" title="6. LEARN - Sacral" onclick="exploreDomains()">6</div>
            <div class="domain-dot d7" title="7. TRANSCEND - Root" onclick="exploreDomains()">7</div>
        </div>

        <!-- Input Section -->
        <div class="input-section">
            <h2>What do you want to see clearly?</h2>
            <textarea id="input" placeholder="Paste an email, describe a situation, share a conversation, ask a question...

ARAYA will detect the pattern and show you what's really happening."></textarea>
            <button class="analyze-btn" onclick="analyze()">Show Me The Pattern</button>
        </div>

        <!-- Results -->
        <div class="results" id="results">
            <div class="polarity" id="polarity">
                <h3 id="polarity-label">ANALYZING...</h3>
                <p id="polarity-desc"></p>
            </div>

            <div class="domains-detected" id="domains"></div>

            <div class="reflection">
                <h4>ARAYA's Reflection</h4>
                <p id="reflection"></p>
            </div>

            <div class="patterns-found">
                <strong>Patterns Detected:</strong>
                <div class="pattern-list" id="patterns"></div>
            </div>
        </div>

        <footer>
            <p style="margin-bottom: 12px;"><a href="araya-light-mvp.html" style="color: #9370db; font-size: 1.1em; text-decoration: none; border: 1px solid #9370db; padding: 8px 16px; border-radius: 8px;">Talk to ARAYA - Your AI Companion</a></p>
            <p>Consciousness Revolution | <a href="https://conciousnessrevolution.io">Home</a></p>
            <p style="margin-top: 8px;">The pattern never lies. 3 → 7 → 13 → ∞</p>
        </footer>
    </div>

    <script>
        // Pattern Libraries
        const BUILDER_PATTERNS = [
            'create', 'help', 'support', 'honest', 'clear', 'direct', 'love',
            'truth', 'respect', 'boundary', 'growth', 'learn', 'share', 'give',
            'transparent', 'accountable', 'consistent', 'reliable', 'kind',
            'grateful', 'appreciate', 'understand', 'listen', 'collaborate'
        ];

        const DESTROYER_PATTERNS = [
            'manipulate', 'gaslight', 'blame', 'shame', 'guilt', 'control',
            'isolate', 'threaten', 'dismiss', 'invalidate', 'lie', 'deceive',
            'exploit', 'triangulate', 'lovebomb', 'hoover', 'silent treatment',
            'moving goalposts', 'double bind', 'projection', 'deflect',
            'always', 'never', 'you made me', 'if you loved me', 'crazy',
            'too sensitive', 'overreacting', 'nobody else', 'everyone thinks'
        ];

        const DOMAINS = {
            '1_COMMAND': {
                name: 'COMMAND',
                color: '#9333EA',
                keywords: ['decision', 'control', 'lead', 'manage', 'priority', 'choose', 'will'],
                builder: 'Clear direction, empowered choices',
                destroyer: 'Confusion, paralysis, being controlled'
            },
            '2_BUILD': {
                name: 'BUILD',
                color: '#6366F1',
                keywords: ['create', 'make', 'build', 'work', 'project', 'code', 'design'],
                builder: 'Flow state, productive creation',
                destroyer: 'Blocked creativity, sabotaged work'
            },
            '3_CONNECT': {
                name: 'CONNECT',
                color: '#0EA5E9',
                keywords: ['relationship', 'friend', 'family', 'partner', 'talk', 'message', 'they', 'he', 'she'],
                builder: 'Authentic connection, heard and seen',
                destroyer: 'Isolation, manipulation, silenced'
            },
            '4_PROTECT': {
                name: 'PROTECT',
                color: '#22C55E',
                keywords: ['boundary', 'safe', 'defend', 'legal', 'rights', 'privacy', 'no'],
                builder: 'Safe boundaries, protected space',
                destroyer: 'Violated boundaries, feeling unsafe'
            },
            '5_GROW': {
                name: 'GROW',
                color: '#EAB308',
                keywords: ['money', 'business', 'job', 'career', 'success', 'opportunity', 'pay'],
                builder: 'Abundance, fair exchange',
                destroyer: 'Exploitation, scarcity, theft'
            },
            '6_LEARN': {
                name: 'LEARN',
                color: '#F97316',
                keywords: ['understand', 'know', 'why', 'how', 'confused', 'clarity', 'truth'],
                builder: 'Clarity, wisdom, truth',
                destroyer: 'Confusion, gaslighting, doubt'
            },
            '7_TRANSCEND': {
                name: 'TRANSCEND',
                color: '#EF4444',
                keywords: ['soul', 'spirit', 'meaning', 'purpose', 'peace', 'feel', 'sense'],
                builder: 'Connected, purposeful, at peace',
                destroyer: 'Lost, disconnected, empty'
            }
        };

        function analyze() {
            const input = document.getElementById('input').value;
            if (!input.trim()) {
                console.warn('Please enter something to analyze');
                return;
            }

            const inputLower = input.toLowerCase();

            // Detect patterns
            const builderFound = BUILDER_PATTERNS.filter(p => inputLower.includes(p));
            const destroyerFound = DESTROYER_PATTERNS.filter(p => inputLower.includes(p));

            // Calculate polarity
            const builderScore = builderFound.length;
            const destroyerScore = destroyerFound.length * 1.5; // Weight destroyer patterns

            let polarity, polarityDesc;
            if (destroyerScore > builderScore && destroyerScore > 0) {
                polarity = 'destroyer';
                polarityDesc = 'Warning: Destroyer patterns detected. This situation contains manipulation or harm indicators.';
            } else if (builderScore > destroyerScore) {
                polarity = 'builder';
                polarityDesc = 'Positive: Builder patterns present. This shows healthy, constructive energy.';
            } else {
                polarity = 'neutral';
                polarityDesc = 'Neutral: No strong pattern detected. More context may reveal the pattern.';
            }

            // Detect domains
            const domainsFound = [];
            for (const [key, domain] of Object.entries(DOMAINS)) {
                const matches = domain.keywords.filter(kw => inputLower.includes(kw));
                if (matches.length > 0) {
                    domainsFound.push({ key, ...domain, matches });
                }
            }

            // Sort by relevance
            domainsFound.sort((a, b) => b.matches.length - a.matches.length);

            // Generate reflection
            let reflection = generateReflection(polarity, domainsFound, builderFound, destroyerFound, input);

            // Display results
            displayResults(polarity, polarityDesc, domainsFound, builderFound, destroyerFound, reflection);
        }

        function generateReflection(polarity, domains, builder, destroyer, input) {
            const primaryDomain = domains[0];

            if (polarity === 'destroyer') {
                if (destroyer.includes('gaslight') || destroyer.includes('crazy') || destroyer.includes('too sensitive')) {
                    return `I see gaslighting patterns here. Someone is trying to make you doubt your own perception. Your feelings are valid. What you experienced is real. The pattern of making you question your reality is a classic manipulation tactic. Trust yourself.`;
                }
                if (destroyer.includes('guilt') || destroyer.includes('if you loved me')) {
                    return `This contains emotional manipulation through guilt. Healthy relationships don't require you to prove love through compliance. Notice how the request is framed as a test of your loyalty or care. This is a destroyer pattern in the ${primaryDomain?.name || 'CONNECT'} domain.`;
                }
                if (destroyer.includes('blame') || destroyer.includes('you made me')) {
                    return `I see blame-shifting here. No one can "make" another person feel or do something. This language removes accountability and places responsibility on you for their choices. The pattern is: avoid responsibility by making you the cause of their behavior.`;
                }
                return `Destroyer patterns detected: ${destroyer.join(', ')}. These indicate manipulation, control, or harm. ${primaryDomain ? `This primarily affects your ${primaryDomain.name} domain - ${primaryDomain.destroyer}.` : ''} Trust your instincts. The pattern is showing you something important.`;
            }

            if (polarity === 'builder') {
                return `Builder patterns present: ${builder.join(', ')}. This situation shows healthy dynamics. ${primaryDomain ? `In your ${primaryDomain.name} domain, this looks like: ${primaryDomain.builder}.` : ''} The energy here is constructive and supportive.`;
            }

            return `The pattern isn't immediately clear from this input. Consider: What emotion does this situation trigger? What are you being asked to do or believe? Sometimes the most important patterns are in what's NOT being said.`;
        }

        function displayResults(polarity, polarityDesc, domains, builder, destroyer, reflection) {
            const resultsEl = document.getElementById('results');
            const polarityEl = document.getElementById('polarity');
            const polarityLabel = document.getElementById('polarity-label');
            const polarityDescEl = document.getElementById('polarity-desc');
            const domainsEl = document.getElementById('domains');
            const reflectionEl = document.getElementById('reflection');
            const patternsEl = document.getElementById('patterns');

            // Show results
            resultsEl.classList.add('active');

            // Set polarity
            polarityEl.className = `polarity ${polarity}`;
            polarityLabel.textContent = polarity.toUpperCase() + ' PATTERN';
            polarityDescEl.textContent = polarityDesc;

            // Set domains
            domainsEl.innerHTML = domains.map(d =>
                `<span class="domain-tag" style="background: ${d.color}22; color: ${d.color}; border: 1px solid ${d.color}">${d.name}</span>`
            ).join('');

            if (domains.length === 0) {
                domainsEl.innerHTML = '<span class="domain-tag" style="background: #33333366; color: #888">GENERAL</span>';
            }

            // Set reflection
            reflectionEl.textContent = reflection;

            // Set patterns
            patternsEl.innerHTML = [
                ...builder.map(p => `<span class="pattern-tag builder">${p}</span>`),
                ...destroyer.map(p => `<span class="pattern-tag destroyer">${p}</span>`)
            ].join('');

            if (builder.length === 0 && destroyer.length === 0) {
                patternsEl.innerHTML = '<span class="pattern-tag" style="background: #33333366; color: #888">No specific patterns detected</span>';
            }

            // Scroll to results
            resultsEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function exploreDomains() {
            window.location.href = '/seven-domains/';
        }
    </script>
    <script src="/js/bug-widget.js"></script>
</body>
</html>
