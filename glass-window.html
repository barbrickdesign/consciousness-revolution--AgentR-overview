<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glass Window - Component Viewer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 32px;
            background: linear-gradient(90deg, #8b5cf6, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .header .subtitle {
            color: #888;
            font-size: 14px;
        }

        /* Glass Window Container */
        .glass-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 24px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .glass-window {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
        }

        .glass-window:hover {
            transform: translateY(-4px);
            border-color: rgba(139, 92, 246, 0.5);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        /* Status Badge */
        .status-badge {
            position: absolute;
            top: 16px;
            right: 16px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-live { background: #22c55e; color: #000; }
        .status-active { background: #3b82f6; color: #fff; }
        .status-beta { background: #f59e0b; color: #000; }
        .status-planning { background: #6b7280; color: #fff; }

        /* Domain Tag */
        .domain-tag {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 10px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .window-header {
            padding: 24px 24px 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .window-header h2 {
            font-size: 20px;
            margin-bottom: 8px;
            color: #fff;
        }

        .window-header .description {
            color: #aaa;
            font-size: 13px;
            line-height: 1.5;
        }

        /* Progress Bar */
        .progress-section {
            padding: 16px 24px;
            background: rgba(0, 0, 0, 0.2);
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 12px;
            color: #888;
        }

        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6, #06b6d4);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        /* Current Work */
        .current-work {
            padding: 16px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .current-work h3 {
            font-size: 11px;
            color: #8b5cf6;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .current-work p {
            font-size: 13px;
        }

        /* Needs Help Section */
        .needs-help {
            padding: 16px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .needs-help h3 {
            font-size: 11px;
            color: #f59e0b;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .help-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .help-tag {
            padding: 4px 10px;
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 4px;
            font-size: 11px;
            color: #f59e0b;
        }

        /* Future Capabilities */
        .future {
            padding: 16px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .future h3 {
            font-size: 11px;
            color: #06b6d4;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .future ul {
            list-style: none;
            font-size: 12px;
            color: #888;
        }

        .future li {
            padding: 4px 0;
            padding-left: 16px;
            position: relative;
        }

        .future li::before {
            content: '→';
            position: absolute;
            left: 0;
            color: #06b6d4;
        }

        /* Actions */
        .window-actions {
            padding: 16px 24px;
            display: flex;
            gap: 12px;
        }

        .btn {
            flex: 1;
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(90deg, #8b5cf6, #06b6d4);
            color: white;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #e0e0e0;
        }

        .btn:hover {
            transform: scale(1.02);
        }

        /* Stats Footer */
        .window-footer {
            padding: 12px 24px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: #666;
        }

        /* Filters */
        .filters {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            background: transparent;
            color: #888;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 12px;
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: rgba(139, 92, 246, 0.2);
            border-color: #8b5cf6;
            color: #fff;
        }

        /* Contribute CTA */
        .contribute-cta {
            text-align: center;
            padding: 40px 20px;
            margin-top: 40px;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 16px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .contribute-cta h2 {
            font-size: 24px;
            margin-bottom: 12px;
        }

        .contribute-cta p {
            color: #888;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Glass Window</h1>
        <div class="subtitle">Every component visible. Download, improve, upload back.</div>
    </div>

    <div class="filters">
        <button class="filter-btn active" data-filter="all">All Components</button>
        <button class="filter-btn" data-filter="1_COMMAND">Command</button>
        <button class="filter-btn" data-filter="2_BUILD">Build</button>
        <button class="filter-btn" data-filter="4_PROTECT">Protect</button>
        <button class="filter-btn" data-filter="7_TRANSCEND">Transcend</button>
        <button class="filter-btn" data-filter="needs-help">Needs Help</button>
    </div>

    <div class="glass-grid" id="componentGrid">
        <!-- Components loaded dynamically -->
    </div>

    <div class="contribute-cta">
        <h2>Want to Contribute?</h2>
        <p>Download any component, make improvements, and upload your progress back to help everyone.</p>
        <a href="https://github.com/overkillkulture/consciousness-revolution" class="btn btn-primary" style="display: inline-block; width: auto; padding: 12px 32px;">
            View on GitHub
        </a>
    </div>

    <script>
        const DOMAIN_COLORS = {
            '1_COMMAND': '#7c3aed',
            '2_BUILD': '#2563eb',
            '3_CONNECT': '#0891b2',
            '4_PROTECT': '#dc2626',
            '5_GROW': '#16a34a',
            '6_LEARN': '#ca8a04',
            '7_TRANSCEND': '#9333ea'
        };

        async function loadComponents() {
            try {
                const response = await fetch('component-registry.json');
                const data = await response.json();
                renderComponents(data.components, data.domains);
                setupFilters(data.components);
            } catch (error) {
                console.error('Failed to load components:', error);
            }
        }

        function renderComponents(components, domains) {
            const grid = document.getElementById('componentGrid');
            grid.innerHTML = '';

            Object.values(components).forEach(comp => {
                const domain = domains[comp.domain];
                const progress = Math.round((comp.phase / comp.totalPhases) * 100);

                const card = document.createElement('div');
                card.className = 'glass-window';
                card.dataset.domain = comp.domain;
                card.dataset.needsHelp = comp.needsHelp.length > 0;

                card.innerHTML = `
                    <span class="status-badge status-${comp.status}">${comp.status}</span>

                    <div class="window-header">
                        <span class="domain-tag" style="background: ${DOMAIN_COLORS[comp.domain]}20; color: ${DOMAIN_COLORS[comp.domain]}; border: 1px solid ${DOMAIN_COLORS[comp.domain]}40;">
                            ${domain.name}
                        </span>
                        <h2>${comp.name}</h2>
                        <p class="description">${comp.description}</p>
                    </div>

                    <div class="progress-section">
                        <div class="progress-label">
                            <span>Phase ${comp.phase} of ${comp.totalPhases}</span>
                            <span>${progress}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%"></div>
                        </div>
                    </div>

                    <div class="current-work">
                        <h3>Currently Working On</h3>
                        <p>${comp.currentWork}</p>
                    </div>

                    ${comp.needsHelp.length > 0 ? `
                    <div class="needs-help">
                        <h3>Needs Help With</h3>
                        <div class="help-tags">
                            ${comp.needsHelp.map(h => `<span class="help-tag">${h}</span>`).join('')}
                        </div>
                    </div>
                    ` : ''}

                    <div class="future">
                        <h3>Future Capabilities</h3>
                        <ul>
                            ${comp.futureCapabilities.map(f => `<li>${f}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="window-actions">
                        ${comp.downloadable ?
                            `<a href="${comp.downloadUrl}" class="btn btn-primary">Download</a>` :
                            comp.liveUrl ?
                            `<a href="${comp.liveUrl}" class="btn btn-primary" target="_blank">View Live</a>` :
                            `<button class="btn btn-secondary" disabled>Coming Soon</button>`
                        }
                        <button class="btn btn-secondary" onclick="contribute('${comp.id}')">Contribute</button>
                    </div>

                    <div class="window-footer">
                        <span>${comp.contributors} contributor${comp.contributors !== 1 ? 's' : ''}</span>
                        <span>Updated ${comp.lastActivity}</span>
                    </div>
                `;

                grid.appendChild(card);
            });
        }

        function setupFilters(components) {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    const filter = btn.dataset.filter;
                    document.querySelectorAll('.glass-window').forEach(card => {
                        if (filter === 'all') {
                            card.style.display = 'block';
                        } else if (filter === 'needs-help') {
                            card.style.display = card.dataset.needsHelp === 'true' ? 'block' : 'none';
                        } else {
                            card.style.display = card.dataset.domain === filter ? 'block' : 'none';
                        }
                    });
                });
            });
        }

        function contribute(componentId) {
            window.open(`https://github.com/overkillkulture/consciousness-revolution/issues/new?title=Contribution: ${componentId}&body=I want to help with...`, '_blank');
        }

        loadComponents();
    </script>
    <script src="/js/bug-widget.js"></script>
    <p style="text-align:center;color:#666;font-family:monospace;margin:40px 0;">Pattern: 3 → 7 → 13 → ∞</p>
</body>
</html>
